window.app={routers:{},models:{},views:{},JST:{}},this.app.JST.category=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<ul class="flex-container shift">\n    ',_.each(tabs,function(e){__p+='\n        <li><label for="directory/'+(null==(__t=category)?"":__t)+"/"+(null==(__t=e.toLowerCase())?"":__t)+'">'+(null==(__t=e)?"":__t)+"</label></li>\n    "}),__p+='\n</ul>\n<section class="main-content"></section>';return __p},this.app.JST.content=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<input id="directory/'+(null==(__t=category)?"":__t)+"/"+(null==(__t=tab.toLowerCase())?"":__t)+'" name="'+(null==(__t=category)?"":__t)+'-group" type="radio">\n\n<ul>\n    <li>\n        <input name="subcategory-'+(null==(__t=category)?"":__t)+'" id="'+(null==(__t=category)?"":__t)+"-"+(null==(__t=tab.toLowerCase())?"":__t)+'-shipping" type="checkbox"/>\n        <header class="flex-container aligning">\n            <div class="caret">▽</div>\n            <h2><label for="'+(null==(__t=category)?"":__t)+"-"+(null==(__t=tab.toLowerCase())?"":__t)+'-shipping">Shipping '+(null==(__t=category)?"":__t)+" "+(null==(__t=tab.toLowerCase())?"":__t)+'</label></h2>\n        </header>\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad, alias consequatur earum esse iusto\n            labore maiores quis rem voluptatem voluptatibus! Adipisci cum delectus impedit magni nisi rerum\n            tempore tenetur vel?</p>\n    </li>\n    <li>\n        <input name="subcategory-'+(null==(__t=category)?"":__t)+'" id="'+(null==(__t=category)?"":__t)+"-"+(null==(__t=tab.toLowerCase())?"":__t)+'-billing" type="checkbox"/>\n        <header class="flex-container aligning">\n            <div class="caret">▽</div>\n            <h2><label for="'+(null==(__t=category)?"":__t)+"-"+(null==(__t=tab.toLowerCase())?"":__t)+'-billing">Billing '+(null==(__t=category)?"":__t)+" "+(null==(__t=tab.toLowerCase())?"":__t)+'</label></h2>\n        </header>\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad, alias consequatur earum esse iusto\n            labore maiores quis rem voluptatem voluptatibus! Adipisci cum delectus impedit magni nisi rerum\n            tempore tenetur vel?</p>\n    </li>\n    <li>\n        <input name="subcategory-'+(null==(__t=category)?"":__t)+'" id="'+(null==(__t=category)?"":__t)+"-"+(null==(__t=tab.toLowerCase())?"":__t)+'-home" type="checkbox"/>\n        <header class="flex-container aligning">\n            <div class="caret">▽</div>\n            <h2><label for="'+(null==(__t=category)?"":__t)+"-"+(null==(__t=tab.toLowerCase())?"":__t)+'-home">Home '+(null==(__t=category)?"":__t)+" "+(null==(__t=tab.toLowerCase())?"":__t)+"</label></h2>\n        </header>\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad, alias consequatur earum esse iusto\n            labore maiores quis rem voluptatem voluptatibus! Adipisci cum delectus impedit magni nisi rerum\n            tempore tenetur vel?</p>\n    </li>\n</ul>";return __p},this.app.JST.main=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="flex-container main-container">\n    <aside>\n        <nav>\n            <ul class="sidebar">\n                ',_.each(data,function(e,t){__p+="\n                    <li><a href='#directory/"+(null==(__t=t.toLowerCase())?"":__t)+"'>"+(null==(__t=t)?"":__t)+"</a></li>\n                "}),__p+="\n            </ul>\n        </nav>\n    </aside>\n    <main>\n        ",_.each(data,function(e,t){__p+="\n            <section id='directory/"+(null==(__t=t.toLowerCase())?"":__t)+"'></section>\n        "}),__p+="\n    </main>\n</div>";return __p},function(e,t){e.models.MainModel=t.Model.extend({url:"assets/data.json"})}(window.app,Backbone),function(e,t){e.views.TabView=t.View.extend({events:{},initialize:function(e){this.render(e)},render:function(t){return this.$el.html(e.JST.content(t)),this}})}(window.app,Backbone),function(e,t,i){e.views.CategoryView=i.View.extend({tabViews:[],events:{"change [type=checkbox]":"toggleDescription","change [type=radio]":"changeActive"},changeActive:function(t){this.$(".shift > li").removeClass("active"),e.router.navigate(t.target.id,{trigger:!0}),this.$('[for="'+t.target.id+'"]').parent().addClass("active"),this.$(".visible").removeClass("visible")},initialize:function(e){this.render(e)},renderTab:function(t,i){var n=new e.views.TabView({category:t.category,tab:i});this.$(".main-content").append(n.el),this.tabViews.push(n)},toggleDescription:function(e){var t=localStorage.getItem("choosen-topics"),i=t&&t.split(", ")||[],n=e.target,a="#"+n.id;n.checked?(i.push(a),localStorage.setItem("choosen-topics",t?i.join(", "):a)):t&&localStorage.setItem("choosen-topics",_.without(i,a).join(", "))},renderTabs:function(e){var t=e.data[this.capitalize(e.category)].tabs;_.each(t,this.renderTab.bind(this,e))},capitalize:function(e){return e.replace(/^./,e[0].toUpperCase())},setActiveTab:function(e,t){this.$('[id^="directory/'+e+t).next().addClass("visible")},render:function(t){var i=t.tab?"/"+t.tab+'"]':'"]:first',n=t.data[this.capitalize(t.category)];return this.$el.html(e.JST.category(_.extend(n,{category:t.category}))).addClass("visible"),this.renderTabs(t),this.setActiveTab(t.category,i),this}})}(window.app,$,Backbone),function(e,t,i){e.views.MainView=i.View.extend({_subView:null,el:"body",events:{"click .sidebar > li":"changeActive"},changeActive:function(e){this.$(".sidebar > li").removeClass("active"),t(e.currentTarget).addClass("active"),this.$("main > section").removeClass("visible"),location.hash+=" "},initialize:function(t,i){var n;this.model=new e.models.MainModel,n=this.model.fetch().done(this.render.bind(this)),t&&n.done(this.renderSubView.bind(this,t,i))},setActiveTabs:function(e,t){this.$('[for*="directory/'+e+"/"+t+'"]').parent().add(this.$('[href$="'+e+'"]').parent()).addClass("active"),this.$(localStorage.getItem("choosen-topics")+', [id*="directory/'+e+"/"+t+'"]').attr("checked",!0)},renderSubView:function(t,i){this._subView=new e.views.CategoryView({el:this.$('section[id^="directory/'+t+'"]'),data:this.model.get("data"),category:t,tab:i}),this.setActiveTabs(t,i)},render:function(t){return this.$el.html(e.JST.main(t)),this}})}(window.app,$,Backbone),function(e,t,i){e.routers.Router=i.Router.extend({_mainView:null,routes:{"directory/:goods/:tab":"renderAnotherGoods","directory/:goods":"renderGoods","":"renderByDefault"},renderAnotherGoods:function(t,i){this._mainView?this._mainView.renderSubView(t,i):this._mainView=new e.views.MainView(t,i)},renderGoods:function(t,i){this._mainView?this._mainView.renderSubView(t,i):this._mainView=new e.views.MainView(t,i)},renderByDefault:function(){this._mainView=new e.views.MainView}})}(window.app,$,Backbone),$(function(){app.router=new app.routers.Router,Backbone.history.start()});